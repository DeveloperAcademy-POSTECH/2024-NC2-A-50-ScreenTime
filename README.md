# 2024-NC2-A50-ScreenTime
## ğŸ¥ Youtube Link
(ì¶”í›„ ë§Œë“¤ì–´ì§„ ìœ íŠœë¸Œ ë§í¬ ì¶”ê°€)

<br>

## ğŸ’¡ Screen Time
> **What is Screen Time?**<br>
> Screen Timeì€ ê¸°ê¸°ì˜ ì•± ì‚¬ìš© ë°ì´í„°ë¥¼ ê³µìœ  ë° ì¶”ì , ê´€ë¦¬í•˜ëŠ” ê²ƒê³¼ ê´€ë ¨ëœ ê¸°ìˆ ì…ë‹ˆë‹¤.

**[ê¸°ê¸° ì‚¬ìš©ì‹œê°„ ì¶”ì ]**<br>
ê¸°ê¸° ì‚¬ìš© ì‹œê°„, ì•± ì„œë¹„ìŠ¤, ì›¹ ì‚¬ì´íŠ¸ì— ë¨¸ë¬¸ ì‹œê°„ì„ ì¶”ì í•˜ê³  ê¸°ë¡, í™”ë©´ê¹¨ìš°ê¸° ë“±

**[ìŠ¤í¬ë¦°íƒ€ì„ ì œì–´]**<br>
ê¸°ê¸° ì‚¬ìš© ì‹œê°„ì„ ì¶”ì í•´ì„œ íŠ¹ì • ì–´í”Œì´ë‚˜ ì›¹ì‚¬ì´íŠ¸ì— ë¨¸ë¬´ëŠ” ì‹œê°„ì„ ì œì–´ ê°€ëŠ¥(ì‹œê°„ì œí•œ, ì°¨ë‹¨)

**[ìŠ¤í¬ë¦° íƒ€ì„ ì‚¬ìš©ëŸ‰ ê³µìœ ]**<br>
ë³´í˜¸ìê°€ ìë…€ì˜ ìŠ¤í¬ë¦°íƒ€ì„ì„ ê³µìœ ë°›ì„ ìˆ˜ ìˆê³  ê·¸ê²ƒì„ ë³´í˜¸ì°¨ì›ì—ì„œ ì œí•œ ê°€ëŠ¥

<br>

## ğŸ¯ What we focus on?
**[ì•±ë³„ ì‚¬ìš©ëŸ‰ ì¶”ì  ê¸°ëŠ¥ë¥¼ ê³ ë¥¸ ì´ìœ ]**
- ìŠ¤í¬ë¦°íƒ€ì„ ê¸°ëŠ¥ì´ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ëŸ‰ ì¶”ì ì„ ì œê³µí•˜ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆì„ ë•Œ,â€¨ë§¤ìš° ë‹¤ì–‘í•œ ì•„ì´ë””ì–´ë¡œ í™•ì¥ í•  ìˆ˜ ìˆê² ë‹¤ê³  íŒë‹¨í–ˆë‹¤.
- ìŠ¤í¬ë¦°íƒ€ì„ì´ í†µì œ, ì œí•œ, ì°¨ë‹¨í•˜ëŠ” ê¸°ëŠ¥ì´ ì£¼ë¡œ ìˆëŠ”ë°, ë“£ìë§ˆì ê°•ì œì ì´ê³  ë¶€ì •ì ì¸ ëŠë‚Œì´ ê°•í•˜ê²Œ ë‹¤ê°€ì™”ë‹¤.<br>ë”°ë¼ì„œ, ê°•í•œ ì œì–´ê°€ ì•„ë‹Œ ìŠ¤ìŠ¤ë¡œ í†µì œí•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ê¸°ëŠ¥ì— ì§‘ì¤‘í•˜ê³  ì‹¶ì—ˆë‹¤.

**[ì•±ë³„ ì‚¬ìš©ëŸ‰ ì¶”ì  ê¸°ëŠ¥ì„ ì–´ë–¤ ì‹ìœ¼ë¡œ í™œìš©í–ˆëŠ”ì§€]**
- ì‚¬ìš©ìê°€ ì‚¬ìš©ì„ ì¤„ì´ê³  ì‹¶ì€ ì•±ì„ ì„¤ì •, í•˜ë£¨ë™ì•ˆ ì‚¬ìš©í•  ì‹œê°„ì„ ì„ íƒí•œë‹¤.<br>ìŠ¤í¬ë¦°íƒ€ì„ì„ í†µí•´ ì‚¬ìš©ëŸ‰ì„ ì¶”ì í•˜ê³ , ì„¤ì •í•œ ì‹œê°„ì´ ë‹¤ê°€ì˜¤ë©´ ì•Œë¦¼ì„ ë³´ë‚´ì„œ ì¸ì§€ë¥¼ ì‹œì¼œì¤€ë‹¤.
- ì•Œë¦¼ ë¬¸êµ¬ë¥¼ ì‚¬ìš©ìê°€ ì§ì ‘ ì„¤ì •í•´ì„œ ë³¸ì¸ê³¼ì˜ ëŒ€í™”, ì•½ì†ì„ ì§€í‚¤ê²Œ ë„ì™€ì¤€ë‹¤. 

<br>

## ğŸ’¼ Use Case
<img width="800" alt="usecase" src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-A50-ScreenTime/assets/68256612/03be900c-3468-4c75-8785-28a4d7e9ec32">




<br>

## ğŸ–¼ï¸ Prototype

<img width="300" alt="ì˜¨ë³´ë”©2" src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-A50-ScreenTime/assets/68256612/054e40ec-f06c-4a04-b553-b1b9ae620a50">

<img width="300" alt="ì•Œë¦¼" src="https://github.com/DeveloperAcademy-POSTECH/2024-NC2-A50-ScreenTime/assets/68256612/2e470b3b-79a9-4d10-bb2a-d379716a56d7">

<br>

## ğŸ› ï¸ About Code
### class DeviceActivityManager
ìŠ¤í¬ë¦°íƒ€ì„ ê¶Œí•œ ìš”ì²­ê³¼ ì•± ëª¨ë‹ˆí„°ë§ ì‹œì‘/ì¤‘ë‹¨ ê¸°ëŠ¥ì„ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤.

```swift
class DeviceActivityManager {
    
    static let shared = DeviceActivityManager()
    private init() {}
    
    let deviceActivityCenter = DeviceActivityCenter()
    
    // MARK: ìŠ¤í¬ë¦°íƒ€ì„ ê¶Œí•œ ìš”ì²­
    func reqScreenTimePermission() { ... }
   
    // MARK: ëª¨ë‹ˆí„°ë§ ì‹œì‘
    func startDeviceActivityMonitoring( ... ) { ... }
      
    // MARK: ëª¨ë‹ˆí„°ë§ ì¤‘ë‹¨
    func stopDeviceActivityMonitoring() { ... }
}
```


<br>

### func StartActivityMonitoring
ì‚¬ìš©ìê°€ ì„ íƒí•œ ì•±ì˜ í† í°ê³¼ ì œí•œí•˜ê³  ì‹¶ì€ ì‹œê°„ì¸ ì„ê³„ê°’ì„ ì¸ìë¡œ ë°›ì•„ ëª¨ë‹ˆí„°ë§ì„ ì‹œì‘í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
```swift
// MARK: ëª¨ë‹ˆí„°ë§ ì‹œì‘
func startDeviceActivityMonitoring(appTokens: FamilyActivitySelection,
                                   hour: Int, minute: Int, 
                                   completion: @escaping (Result<Void, Error>) -> Void) {
    // MARK: ì•± í† í°
    let selectedAppTokens = appTokens.applicationTokens
    
    // MARK: ì„ê³„ê°’
    let threshold = DateComponents(hour: hour, minute: minute)
    
    // MARK: ëª¨ë‹ˆí„°ë§ í•  ìŠ¤ì¼€ì¤„ ì„¤ì • - ë§¤ì¼ 24ì‹œê°„
    let schedule = DeviceActivitySchedule(
        intervalStart: DateComponents(hour: 0, minute: 0),
        intervalEnd: DateComponents(hour: 23, minute: 59),
        repeats: true
    )
    
    // MARK: ì„ê³„ê°’, ì•±í† í°ì„ ì´ë²¤íŠ¸ë¡œ ë¬¶ìŒ
    let events: [DeviceActivityEvent.Name: DeviceActivityEvent] = [
        .encouraged: DeviceActivityEvent(
            applications: selectedAppTokens,
            threshold: threshold
        )
    ]
    
    // MARK: ì•± ëª¨ë‹ˆí„°ë§ ì‹œì‘
    do {
        try deviceActivityCenter.startMonitoring(DeviceActivityName.daily, during: schedule, events: events)
    } catch {
        completion(.failure(error))
        return
    }
    
    completion(.success(()))
}
```

<br>

### class DeviceActivityMonitor
ì•±ë“¤ì„ ëª¨ë‹ˆí„°ë§í•˜ë©´ì„œ íŠ¹ì • ìƒí™©(ì„ê³„ê°’ì— ë„ë‹¬ ë“±)ì— í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ë“¤ì„ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
```swift
class DeviceActivityMonitorExtension: DeviceActivityMonitor {
    
    let notificationText = UserSettingsManager.shared.loadNotificationText()
    
    // í™œë™ ì¸í„°ë²Œì´ ì‹œì‘ë  ë•Œ í˜¸ì¶œ
    override func intervalDidStart(for activity: DeviceActivityName) {
        super.intervalDidStart(for: activity)
        
        // Handle the start of the interval.
    }
    
    // í™œë™ ì¸í„°ë²Œì´ ì¢…ë£Œë  ë•Œ í˜¸ì¶œ
    override func intervalDidEnd(for activity: DeviceActivityName) {
        super.intervalDidEnd(for: activity)
        
        // Handle the end of the interval.
    }
    
    // ì´ë²¤íŠ¸ê°€ ì„ê³„ê°’ì— ë„ë‹¬í–ˆì„ ë•Œ í˜¸ì¶œ
    override func eventDidReachThreshold(_ event: DeviceActivityEvent.Name, activity: DeviceActivityName) {
        super.eventDidReachThreshold(event, activity: activity)
        NotifiactionManager.shared.sendNotification(text: notificationText)
    }
    
    // ì¸í„°ë²Œì´ ì‹œì‘ë˜ê¸° ì „ì— ê²½ê³ ê°€ ë°œìƒí•  ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤.
    override func intervalWillStartWarning(for activity: DeviceActivityName) {
        super.intervalWillStartWarning(for: activity)
        
        // Handle the warning before the interval starts.
    }
    
    // ì¸í„°ë²Œì´ ì¢…ë£Œë˜ê¸° ì „ì— ê²½ê³ ê°€ ë°œìƒí•  ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤.
    override func intervalWillEndWarning(for activity: DeviceActivityName) {
        super.intervalWillEndWarning(for: activity)
        
        // Handle the warning before the interval ends.
    }
    
    // ì´ë²¤íŠ¸ê°€ ì„ê³„ê°’ì— ë„ë‹¬í•˜ê¸° ì „ì— ê²½ê³ ê°€ ë°œìƒí•  ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤.
    override func eventWillReachThresholdWarning(_ event: DeviceActivityEvent.Name, activity: DeviceActivityName) {
        super.eventWillReachThresholdWarning(event, activity: activity)
        
        // Handle the warning before the event reaches its threshold.
    }
}
```
